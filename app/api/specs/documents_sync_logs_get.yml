tags:
  - Documents
summary: Ambil log sinkronisasi dokumen
description: |
  Mengambil daftar log operasi sinkronisasi dokumen dengan pagination dan opsi filter.
  Menampilkan riwayat sinkronisasi dengan statistik berhasil/gagal.
security:
  - bearerAuth: []
parameters:
  - in: query
    name: page
    schema:
      type: integer
      minimum: 1
      default: 1
    description: Nomor halaman untuk pagination
  - in: query
    name: page_size
    schema:
      type: integer
      minimum: 1
      maximum: 100
      default: 10
    description: Jumlah log per halaman
  - in: query
    name: sync_type
    schema:
      type: string
      enum: [portal, website, manual]
    description: Filter berdasarkan tipe sinkronisasi
  - in: query
    name: status
    schema:
      type: string
      enum: [running, success, partial_success, failed]
    description: Filter berdasarkan status sinkronisasi
  - in: query
    name: search
    schema:
      type: string
    description: Pencarian bebas untuk error, doc ID, judul, atau filename
  - in: query
    name: start_date
    schema:
      type: string
      format: date-time
    description: "Filter log mulai dari tanggal tertentu (ISO 8601, contoh: 2025-11-01)"
  - in: query
    name: end_date
    schema:
      type: string
      format: date-time
    description: "Filter log sampai tanggal tertentu (ISO 8601, contoh: 2025-11-30)"
responses:
  200:
    description: Berhasil mengambil log sinkronisasi dokumen
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: "Berhasil mengambil log sinkronisasi dokumen"
            data:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: ID log sinkronisasi
                  sync_type:
                    type: string
                    enum: [portal, website, manual]
                    description: Tipe sinkronisasi
                  status:
                    type: string
                    enum: [running, success, partial_success, failed]
                    description: Status operasi sinkronisasi
                  total_documents:
                    type: integer
                    description: Total dokumen yang diproses
                  successful_documents:
                    type: integer
                    description: Jumlah dokumen yang berhasil diproses
                  failed_documents:
                    type: integer
                    description: Jumlah dokumen yang gagal
                  total_website_documents:
                    type: integer
                    description: Total halaman website yang diproses
                  successful_website_documents:
                    type: integer
                    description: Jumlah halaman website yang berhasil diproses
                  failed_website_documents:
                    type: integer
                    description: Jumlah halaman website yang gagal diproses
                  trigger_source:
                    type: string
                    description: Sumber pemicu sinkronisasi (api, cron, startup)
                  triggered_by:
                    type: string
                    description: User atau sistem yang memicu sinkronisasi
                  started_at:
                    type: string
                    format: date-time
                    description: Waktu mulai sinkronisasi
                  finished_at:
                    type: string
                    format: date-time
                    nullable: true
                    description: Waktu selesai sinkronisasi
                  runtime_seconds:
                    type: number
                    format: float
                    nullable: true
                    description: Total runtime dalam detik
                  error_message:
                    type: string
                    nullable: true
                    description: Pesan error jika sinkronisasi gagal
                  metadata:
                    type: object
                    nullable: true
                    description: Metadata tambahan sinkronisasi
            pagination:
              type: object
              properties:
                page:
                  type: integer
                  description: Nomor halaman saat ini
                page_size:
                  type: integer
                  description: Jumlah item per halaman
                total:
                  type: integer
                  description: Total jumlah log sinkronisasi
                total_pages:
                  type: integer
                  description: Total jumlah halaman
  403:
    description: Akses ditolak
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: "Access log sinkronisasi dokumen tidak diizinkan"
  500:
    description: Kesalahan server internal
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: "Gagal mengambil log sinkronisasi dokumen"
